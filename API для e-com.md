# Тестовое задание “API для e-com”

[Реализация](https://github.com/zeroc0de2022/e-com-api-test/blob/main/README.md)


**Задание:**  
Разработать REST-api для онлайн магазина  
Структура данных:

- Пользователи (справочник)  
- Товары (справочник)  
- Корзины (справочник)  
- Заказы (справочник)  
- Способы оплат (справочник)

Требуемый функционал:

1. Авторизация “Пользователя”  
2. “Пользователь” может иметь одну “Корзину”  
3. “Корзина” может иметь множество “Товаров”  
4. “Пользователь” может оплатить “Корзину”, тогда она станет “Заказом”  
5. “Заказ” должен иметь 3 статуса “На оплату”, “Оплачен”, “Отменен”.  
6. В момент оплаты “Корзины” выбранным “Способом оплаты”, генерируется ссылка на оплату для определенного “Способа оплаты” \- у всех “Способов оплаты” должны быть разные ссылки на оплату. Создается “Заказ” со статусом “На оплату”, “Корзина” привязанная к пользователю удаляется.  
7. При переходе по “ссылке на оплату”, должна генерироваться ссылка на api url для обновления статуса “Заказа” в статус “Оплачен”.  
8. Если заказ не оплачен в течении 2 минут, “Заказ” должен получать статус “Отменен”  
9. У пользователя может быть множество “Заказов”, он может просмотреть историю своих “Заказов”, в заказе должен быть зафиксирован “Способ оплаты”

Необходимо реализовать:

* REST API:  
  * Авторизация пользователя  
  * Добавить товар в корзину пользователя  
  * Удалить товар из корзины пользователя  
  * Получить товар по id  
  * Получить список товаров  
    * Сортировка по цене  
  * Оплатить Корзину (создать заказ, получить ссылку на оплату)  
  * Обновить статус заказа на “Оплачен”  
  * Получить список заказов  
    * Сортировка по дате создания заказа  
    * Фильтрация по статусу заказа  
  * Получить заказ по id  
* Фоновые задачи  
  * Обновление статуса заказа с “На оплату” в “Отменен”, при неоплате его более 2 минут

**Комментарии к реализации:**

* Необходимо выполнить с использованием Laravel  
* Готовое задание отправить ссылкой на репозиторий  
* Обязательно первый коммит должен быть “голым” фреймворком, а последующие коммиты содержат изменения для реализации текущей задачи. Это нужно, чтобы мы могли быстро понять, какой код написан вами, а какой был изначально в фреймворке.

**Дополнительное задание:**  
Это задание является не обязательным, но будет плюсом его решение. 

* Покрыть юнит тестами 50+% кода.
